<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <title>Keyboard</title>
  <style>

    #icebox {
      margin-top: 15px;
    }


/* .particle {
  width: 10px;
  height: 10px;
  background-color: #000;
  position: absolute;
} */

  </style>
</head>
<body>
  <label>Icebox size: <input id="boxSize" type="number" value="30"/></label>
  <label>Particle size: <input id="particleSize" type="number" value="10"/></label>
  <button id="button">START</button>
  <div id="icebox">
  <div id="particle"></div>
  </div>


<script>
const boxSize = document.getElementById("boxSize");
const particleSize = document.getElementById("particleSize");
let pSize;
let maxPosition;
let particle = document.getElementById("particle");

function displayParticle() {
  particle.classList.add("particle");
  particle.style.height = `${pSize}px`;
  particle.style.width = `${pSize}px`;
  particle.style.backgroundColor = "#000";
  particle.style.position = "absolute";
  const size = boxSize.value;
  const x = Math.floor(Math.random() * (size - 1));
  const y = Math.floor(Math.random() * (size - 1));


  particle.x = x;
  particle.y = y;
  particle.style.transform = `translate(${x * pSize}px, ${y * pSize}px)`;
  // return particle;
}



// class Particle {
//   constructor(x, y) {
//     this.x = x;
//     this.y = y;
//   }
//
//   set state(stateName) {
//     this._state = stateName;
//   }
//
//   setState(stateName) {
//     this._state = stateName;
//   }
// }
//
//
// const p = new Particle(10, 50);
// p.state = 'frozen';
//
// //p.setState('frozen');
//
// const a = p.state;
//
//
// new Particle(10, 10);


let displayIcebox = () => {
  const icebox = document.getElementById("icebox");
  const size = boxSize.value;

//  document.body.appendChild(icebox);
  icebox.style.height = `${size * pSize}px`;
  icebox.style.width = `${size * pSize}px`;
  icebox.style.border = "thick solid #000";
  icebox.style.position = "relative";
  // return icebox;
}

const button = document.getElementById("button");
button.addEventListener("click", () => {
  pSize = Number(particleSize.value);
  maxPosition = boxSize.value - 1;
  displayIcebox();
  displayParticle();
});

window.addEventListener("keydown", event => {
  console.dir(particle)
  switch(event.keyCode) {
    case 39: // right
      particle.x += 1;
      //particle.style.transform = `translateX(10px)`;
    break;
    case 37: // left
    particle.x -= 1;
      // particle.style.transform = `translateX(-10px)`;
    break;
    case 38: // up
    particle.y -= 1
      // particle.style.transform = `translateY(-10px)`;
    break;
    case 40: // down
    particle.y += 1;
      // particle.sty le.transform = `translateY(10px)`;
    break;
  }


  if(particle.x > maxPosition) particle.x = maxPosition;
  if(particle.y > maxPosition) particle.y = maxPosition;
  if(particle.x < 0) particle.x = 0;
  if(particle.y < 0) particle.y = 0;


  particle.style.transform = `translate(${particle.x * pSize}px, ${particle.y * pSize}px)`;
// {a: 1, b: 2}
  console.log(event.keyCode);
})

// window.addEventListener("keydown", event => {
//   const size = boxSize.value;
//   const rightDown = (size - 10) + 10;
//   const leftUp = (size - 10) - 10;
//   switch(event.keyCode) {
//     case 39: // right
//       particle.style.transform = `translateX(${rightDown}px)`;
//     break;
//     case 37: // left
//       particle.style.transform = `translateX(${leftUp}px)`;
//     break;
//     case 38: // up
//       particle.style.transform = `translateX(${leftUp}px)`;
//     break;
//     case 40: // down
//       particle.style.transform = `translateX(${rightDown}px)`;
//     break;
//   }
//   console.log(event.keyCode);
// })




</script>
</body>
</html>
