<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>

  </style>
</head>
<body>


<!-- http://www.algorytm.org/numery-identyfikacyjne/pesel.html -->


<label for="pesel">Enter your PESEL number: </label><input type="text" id="pesel"><br/>
<label for="test">TESt</label><input type="checkbox" id=test>
<button id="start">Validate</button>
<p id="result"></p>

<script>
  const peselInput = document.getElementById('pesel').value;
  const start = document.getElementById('start');
  const result = document.getElementById('result');

  start.addEventListener('click', function() {
    let isValid = true;

//------------------------------------------------------------------
    const peselValidation = (peselInput) => {

    // indicates the numbers of pesel that mean year, month, and day of birth
    let year = peselInput.substring(0, 2);
    let month = peselInput.substring(2, 4);
    let day = peselInput.substring(4, 6);

    // cheks numbers added to months in order to recognise the century
    if (month > 80) {
      year += 1800;
      month -= 80;
    } else if(month > 60 && month < 80) {
        year += 2200;
        month -= 60;
    } else if (month > 40 && month < 60) {
        year += 2100;
        month -= 40;
    } else if (month > 20 && month < 40) {
        year += 2000;
        month -= 20;
    } else {
        year += 1900;
   }

// indicates the numbers of pesel that mean sex
let sex = peselInput.substring(6, 10);

// checks if male or female
if (sex % 2 == 0) {
  return 'female';
} else {
  return 'male';
}

//indicates the numbers of pesel that mean the checksum
let checkSum = peselInput.substring(10, 11);
let sum = peselInput.substring(1, 2) * 1 + peselInput.substr(2, 1) * 3
  + peselInput.substring(3) * 7 + peselInput.substring(4) * 9
  + peselInput.substring(5) * 1 + peselInput.substring(6) * 3
  + peselInput.substring(7) * 7 + peselInput.substring(8) * 9
  + peselInput.substring(9) * 1 + peselInput.substring(10) * 3;

// checks the checksum
if ((10-sum ) % 10 == checkSum) {
  isValid = true;
} else {
  isValid = false;
}


}
//------------------------------------------------------------------
    if(isValid)
      result.innerText = 'PESEL is Valid';
    else
      result.innerText = 'PESEL is Invalid';
  });
</script>
</body>
</html>
